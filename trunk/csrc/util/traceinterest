# tests/test_ccndid
# 
# Part of the CCNx distribution.
#
# Copyright (C) 2009, 2010 Palo Alto Research Center, Inc.
#
# This work is free software; you can redistribute it and/or modify it under
# the terms of the GNU General Public License version 2 as published by the
# Free Software Foundation.
# This work is distributed in the hope that it will be useful, but WITHOUT ANY
# WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
# FOR A PARTICULAR PURPOSE.
#
#AFTER : test_single_ccnd
#BEFORE : test_single_ccnd_teardown

# We need to learn the CCNDID of our ccnd.
IsolatePubID () {
	sed -n -e 's@^.*Router><Component ccnbencoding="hexBinary">@@' \
               -e 's@</Router.*$@@p'
}
sudo ccnget $1/trace_interest_flag
sudo ccn_ccnbtoxml -bx $HOME/.ccnx/.traceccnb | IsolatePubID | sed -e 's/<\/Component>//g' | sed -e 's/<Component ccnbencoding="hexBinary">/\n/g'
sudo rm -rf $HOME/.ccnx/.traceccnb
