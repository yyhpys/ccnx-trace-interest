<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Content-Centric Networking in Java: org.ccnx.ccn.impl.repo.LogStructRepoStore Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><b>org</b>.<b>ccnx</b>.<b>ccn</b>.<a class="el" href="namespaceorg_1_1ccnx_1_1ccn_1_1impl.html">impl</a>.<b>repo</b>.<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html">LogStructRepoStore</a>
  </div>
</div>
<div class="contents">
<h1>org.ccnx.ccn.impl.repo.LogStructRepoStore Class Reference</h1><!-- doxytag: class="org::ccnx::ccn::impl::repo::LogStructRepoStore" --><!-- doxytag: inherits="org::ccnx::ccn::impl::repo::RepositoryStoreBase,org::ccnx::ccn::impl::repo::RepositoryStore,org::ccnx::ccn::impl::repo::ContentTree::ContentGetter" -->Implements a log-structured <a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store.html" title="A RepositoryStore stores ContentObjects for later retrieval by Interest and supports...">RepositoryStore</a> on a filesystem using sequential data files with an index for queries.  
<a href="#_details">More...</a>
<p>
<div class="dynheader">
Inheritance diagram for org.ccnx.ccn.impl.repo.LogStructRepoStore:</div>
<div class="dynsection">

<p><center><img src="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.png" usemap="#org.ccnx.ccn.impl.repo.LogStructRepoStore_map" border="0" alt=""></center>
<map name="org.ccnx.ccn.impl.repo.LogStructRepoStore_map">
<area href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store_base.html" alt="org.ccnx.ccn.impl.repo.RepositoryStoreBase" shape="rect" coords="0,56,297,80">
<area href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store.html" alt="org.ccnx.ccn.impl.repo.RepositoryStore" shape="rect" coords="307,56,604,80">
<area href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store.html" alt="org.ccnx.ccn.impl.repo.RepositoryStore" shape="rect" coords="0,0,297,24">
</map>
</div>

<p>
<a href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_object.html">ContentObject</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#03ddc2785f8d3b12441224be1baf6e17">getContent</a> (<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_interest.html">Interest</a> interest)  throws RepositoryException </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets content matching the given interest.  <a href="#03ddc2785f8d3b12441224be1baf6e17"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">boolean&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#5a5f5b5fb066a101d78da71e1904386d">hasContent</a> (<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a> name)  throws RepositoryException </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check for content matching the given name, without retrieving the content itself.  <a href="#5a5f5b5fb066a101d78da71e1904386d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1nameenum_1_1_name_enumeration_response.html">NameEnumerationResponse</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#43dafe552032d17511f461cbe3e1991f">getNamesWithPrefix</a> (<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_interest.html">Interest</a> i, <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a> responseName)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets all names matching the given NameEnumeration interest.  <a href="#43dafe552032d17511f461cbe3e1991f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_policy.html">Policy</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#e105945d0a5bafac9a2810eb7a397351">getPolicy</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets the current policy for this repository.  <a href="#e105945d0a5bafac9a2810eb7a397351"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">String&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#87467f5647127e2bd473ea2d07fcd885">getVersion</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets the current version of this <a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store.html" title="A RepositoryStore stores ContentObjects for later retrieval by Interest and supports...">RepositoryStore</a>.  <a href="#87467f5647127e2bd473ea2d07fcd885"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#e73abf0871eb32d2050fa911fe24ecc7">initialize</a> (String repositoryRoot, File policyFile, String localName, String globalPrefix, String namespace, <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1_c_c_n_handle.html">CCNHandle</a> handle)  throws RepositoryException </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize the repository.  <a href="#e73abf0871eb32d2050fa911fe24ecc7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#3a11439161025008e9b666586bc00fea">policyUpdate</a> ()  throws RepositoryException </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write/rewrite the policy file if different from what we have now.  <a href="#3a11439161025008e9b666586bc00fea"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1nameenum_1_1_name_enumeration_response.html">NameEnumerationResponse</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#a94d920b2ae6391af951aa33748e576e">saveContent</a> (<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_object.html">ContentObject</a> content)  throws RepositoryException </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Save the given content in the repository store.  <a href="#a94d920b2ae6391af951aa33748e576e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_object.html">ContentObject</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#c04fa7239a128812a62f19020fc55bcf">get</a> (<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_content_ref.html">ContentRef</a> ref)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get content for the given reference from the storage files.  <a href="#c04fa7239a128812a62f19020fc55bcf"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">boolean&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#4389adac31c1e202d4960e6f592c6f6d">diagnostic</a> (String name)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Dump all names of data stored in the repository into a special file within the repository on diagnostic request from higher level code.  <a href="#4389adac31c1e202d4960e6f592c6f6d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="d44097baee74dcdf1afee664429013fb"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::shutDown" ref="d44097baee74dcdf1afee664429013fb" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#d44097baee74dcdf1afee664429013fb">shutDown</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Cleanup on shutdown. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="17e72e774ffad55ff26e97769389eb23"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::getStatus" ref="17e72e774ffad55ff26e97769389eb23" args="(String type)" -->
Object&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#17e72e774ffad55ff26e97769389eb23">getStatus</a> (String type)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get implementation defined status. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">synchronized boolean&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#849c732921fb6c2172aded62ffae3480">bulkImport</a> (String name)  throws RepositoryException </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Bulk import of data from a file.  <a href="#849c732921fb6c2172aded62ffae3480"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Static Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="85a4d39d327762eed2c1370b45633be8"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::CURRENT_VERSION" ref="85a4d39d327762eed2c1370b45633be8" args="" -->
static final String&nbsp;</td><td class="memItemRight" valign="bottom"><b>CURRENT_VERSION</b> = &quot;1.4&quot;</td></tr>

<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Integer&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#024050ab48937a809001710b7d84141d">createIndex</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read the current repository file(s) for this repository and create an index for them.  <a href="#024050ab48937a809001710b7d84141d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="533a8fcb2df3d92286422554c6c277ec"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::dumpNames" ref="533a8fcb2df3d92286422554c6c277ec" args="(int nodelen)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>dumpNames</b> (int nodelen)</td></tr>

<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="572d8ac867f5e258f6dc48f85b24df93"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::_repositoryRoot" ref="572d8ac867f5e258f6dc48f85b24df93" args="" -->
String&nbsp;</td><td class="memItemRight" valign="bottom"><b>_repositoryRoot</b> = null</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="08174b6bd0e8e396b1c8df597d1e6670"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::_repositoryMeta" ref="08174b6bd0e8e396b1c8df597d1e6670" args="" -->
String&nbsp;</td><td class="memItemRight" valign="bottom"><b>_repositoryMeta</b> = null</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="000d181cd074db8c2f29580a5f16269a"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::_repositoryFile" ref="000d181cd074db8c2f29580a5f16269a" args="" -->
File&nbsp;</td><td class="memItemRight" valign="bottom"><b>_repositoryFile</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="bbefe8ae494685e1ddfecaee1854bf72"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::_useStoredPolicy" ref="bbefe8ae494685e1ddfecaee1854bf72" args="" -->
boolean&nbsp;</td><td class="memItemRight" valign="bottom"><b>_useStoredPolicy</b> = true</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="8bf6f90621df82b36a48f62fc97f95f7"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::_bulkImportInProgress" ref="8bf6f90621df82b36a48f62fc97f95f7" args="" -->
HashMap&lt; String, String &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><b>_bulkImportInProgress</b> = new HashMap&lt;String, String&gt;()</td></tr>

<tr><td colspan="2"><br><h2>Package Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="235c2be29afca39dee6b9c5356c4c200"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::_files" ref="235c2be29afca39dee6b9c5356c4c200" args="" -->
Map&lt; Integer, RepoFile &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><b>_files</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="53d8e07aadd5cfa54392b7855e3ec3ba"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::_activeWriteFile" ref="53d8e07aadd5cfa54392b7855e3ec3ba" args="" -->
RepoFile&nbsp;</td><td class="memItemRight" valign="bottom"><b>_activeWriteFile</b> = null</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="afc4294f9226029ed8802c2a608fc916"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::_currentFileIndex" ref="afc4294f9226029ed8802c2a608fc916" args="" -->
Integer&nbsp;</td><td class="memItemRight" valign="bottom"><b>_currentFileIndex</b> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="6826bb170fe63d04d08220703c436d5b"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::_index" ref="6826bb170fe63d04d08220703c436d5b" args="" -->
<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_content_tree.html">ContentTree</a>&nbsp;</td><td class="memItemRight" valign="bottom"><b>_index</b></td></tr>

<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><b>FileRef</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><b>LogStructRepoStoreProfile</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><b>RepoFile</b></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Implements a log-structured <a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store.html" title="A RepositoryStore stores ContentObjects for later retrieval by Interest and supports...">RepositoryStore</a> on a filesystem using sequential data files with an index for queries. <hr><h2>Member Function Documentation</h2>
<a class="anchor" name="03ddc2785f8d3b12441224be1baf6e17"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::getContent" ref="03ddc2785f8d3b12441224be1baf6e17" args="(Interest interest)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_object.html">ContentObject</a> org.ccnx.ccn.impl.repo.LogStructRepoStore.getContent           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_interest.html">Interest</a>&nbsp;</td>
          <td class="paramname"> <em>interest</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>  throws <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_exception.html">RepositoryException</a> </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Gets content matching the given interest. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>interest</em>&nbsp;</td><td>the given interest </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>the closest matching ContentObject or null if no match </dd></dl>

<p>Implements <a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store.html#9821950da615d36ad24bb3253f4690cc">org.ccnx.ccn.impl.repo.RepositoryStore</a>.</p>

</div>
</div><p>
<a class="anchor" name="5a5f5b5fb066a101d78da71e1904386d"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::hasContent" ref="5a5f5b5fb066a101d78da71e1904386d" args="(ContentName name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean org.ccnx.ccn.impl.repo.LogStructRepoStore.hasContent           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a>&nbsp;</td>
          <td class="paramname"> <em>name</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>  throws <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_exception.html">RepositoryException</a> </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Check for content matching the given name, without retrieving the content itself. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>ContentName to match exactly, including digest as final explicit component </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>true if there is a ContentObject with exactly the given name, false otherwise </dd></dl>

<p>Implements <a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store.html#7231bc715b6f5f4b1dfa3034a2178ed1">org.ccnx.ccn.impl.repo.RepositoryStore</a>.</p>

</div>
</div><p>
<a class="anchor" name="43dafe552032d17511f461cbe3e1991f"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::getNamesWithPrefix" ref="43dafe552032d17511f461cbe3e1991f" args="(Interest i, ContentName responseName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1nameenum_1_1_name_enumeration_response.html">NameEnumerationResponse</a> org.ccnx.ccn.impl.repo.LogStructRepoStore.getNamesWithPrefix           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_interest.html">Interest</a>&nbsp;</td>
          <td class="paramname"> <em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a>&nbsp;</td>
          <td class="paramname"> <em>responseName</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Gets all names matching the given NameEnumeration interest. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>i</em>&nbsp;</td><td>the interest </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>the data as a NameEnumerationResponse </dd></dl>

<p>Implements <a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store.html#d2d083f9f3d38e22eb14841182b40a96">org.ccnx.ccn.impl.repo.RepositoryStore</a>.</p>

</div>
</div><p>
<a class="anchor" name="e105945d0a5bafac9a2810eb7a397351"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::getPolicy" ref="e105945d0a5bafac9a2810eb7a397351" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_policy.html">Policy</a> org.ccnx.ccn.impl.repo.LogStructRepoStore.getPolicy           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Gets the current policy for this repository. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>the policy </dd></dl>

<p>Implements <a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store.html#b11907eb2cf76555404f3ca9bf7a320e">org.ccnx.ccn.impl.repo.RepositoryStore</a>.</p>

</div>
</div><p>
<a class="anchor" name="87467f5647127e2bd473ea2d07fcd885"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::getVersion" ref="87467f5647127e2bd473ea2d07fcd885" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">String org.ccnx.ccn.impl.repo.LogStructRepoStore.getVersion           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Gets the current version of this <a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store.html" title="A RepositoryStore stores ContentObjects for later retrieval by Interest and supports...">RepositoryStore</a>. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>the version as a String </dd></dl>

<p>Implements <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store_base.html#302d54621806bc16377e116df36dc787">org.ccnx.ccn.impl.repo.RepositoryStoreBase</a>.</p>

</div>
</div><p>
<a class="anchor" name="024050ab48937a809001710b7d84141d"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::createIndex" ref="024050ab48937a809001710b7d84141d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Integer org.ccnx.ccn.impl.repo.LogStructRepoStore.createIndex           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read the current repository file(s) for this repository and create an index for them. 
<p>
WARNING: multiple files are not well tested<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>the number of files making up the repository </dd></dl>

</div>
</div><p>
<a class="anchor" name="e73abf0871eb32d2050fa911fe24ecc7"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::initialize" ref="e73abf0871eb32d2050fa911fe24ecc7" args="(String repositoryRoot, File policyFile, String localName, String globalPrefix, String namespace, CCNHandle handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void org.ccnx.ccn.impl.repo.LogStructRepoStore.initialize           </td>
          <td>(</td>
          <td class="paramtype">String&nbsp;</td>
          <td class="paramname"> <em>repositoryRoot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">File&nbsp;</td>
          <td class="paramname"> <em>policyFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&nbsp;</td>
          <td class="paramname"> <em>localName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&nbsp;</td>
          <td class="paramname"> <em>globalPrefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&nbsp;</td>
          <td class="paramname"> <em>namespace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1_c_c_n_handle.html">CCNHandle</a>&nbsp;</td>
          <td class="paramname"> <em>handle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td>  throws <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_exception.html">RepositoryException</a> </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize the repository. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>repositoryRoot</em>&nbsp;</td><td>the directory containing the files to store a repository. A new directory is created if this doesn't yet exist </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>policyFile</em>&nbsp;</td><td>a file containing policy data to define the initial repository policy (see <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_basic_policy.html" title="A reference implementation of Policy using an XML based policy file.">BasicPolicy</a>) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>localName</em>&nbsp;</td><td>the local name for this repository as a slash separated String (defaults if null) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>globalPrefix</em>&nbsp;</td><td>the global prefix for this repository as a slash separated String (defaults if null) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>An</em>&nbsp;</td><td>initial namespace (defaults to namespace stored in repository, or / if none) </td></tr>
  </table>
</dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_exception.html" title="Exceptions specific to Repositories.">RepositoryException</a></em>&nbsp;</td><td>if the policyFile, localName, or globalName are improperly formatted </td></tr>
  </table>
</dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>handle</em>&nbsp;</td><td>optional <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1_c_c_n_handle.html" title="The core class encapsulating a Java interface to the CCN network.">CCNHandle</a> if caller wants to override the default connection/identity behavior of the repository -- this provides a <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1_key_manager.html" title="Top-level interface for managing our own keys, as well as maintaining an address...">KeyManager</a> and handle for the repository to use to obtain its keys and communicate with ccnd. If null, the repository will configure its own based on policy, or if none, create one using the executing user's defaults. </td></tr>
  </table>
</dl>

<p>Implements <a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store.html#75401f88b3078953f0924effff7f9545">org.ccnx.ccn.impl.repo.RepositoryStore</a>.</p>

</div>
</div><p>
<a class="anchor" name="3a11439161025008e9b666586bc00fea"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::policyUpdate" ref="3a11439161025008e9b666586bc00fea" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void org.ccnx.ccn.impl.repo.LogStructRepoStore.policyUpdate           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>  throws <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_exception.html">RepositoryException</a> </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Write/rewrite the policy file if different from what we have now. 
<p>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_exception.html" title="Exceptions specific to Repositories.">RepositoryException</a></em>&nbsp;</td><td></td></tr>
  </table>
</dl>

<p>
If there are differences we need to write the updated version 
<p>Implements <a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store.html#b37f791cc7078c5d5b472b372c291d5f">org.ccnx.ccn.impl.repo.RepositoryStore</a>.</p>

</div>
</div><p>
<a class="anchor" name="a94d920b2ae6391af951aa33748e576e"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::saveContent" ref="a94d920b2ae6391af951aa33748e576e" args="(ContentObject content)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1nameenum_1_1_name_enumeration_response.html">NameEnumerationResponse</a> org.ccnx.ccn.impl.repo.LogStructRepoStore.saveContent           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_object.html">ContentObject</a>&nbsp;</td>
          <td class="paramname"> <em>content</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>  throws <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_exception.html">RepositoryException</a> </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Save the given content in the repository store. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>content</em>&nbsp;</td><td>the content to save </td></tr>
  </table>
</dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_exception.html" title="Exceptions specific to Repositories.">RepositoryException</a></em>&nbsp;</td><td>it the content can not be written or encoded </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>NameEnumerationResponse if this satisfies an outstanding NameEnumeration request </dd></dl>

<p>Implements <a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store.html#f31aeb4de6f9b9fd92986355f9ad0e72">org.ccnx.ccn.impl.repo.RepositoryStore</a>.</p>

</div>
</div><p>
<a class="anchor" name="c04fa7239a128812a62f19020fc55bcf"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::get" ref="c04fa7239a128812a62f19020fc55bcf" args="(ContentRef ref)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_object.html">ContentObject</a> org.ccnx.ccn.impl.repo.LogStructRepoStore.get           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_content_ref.html">ContentRef</a>&nbsp;</td>
          <td class="paramname"> <em>ref</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get content for the given reference from the storage files. 
<p>
Used to retrieve content for comparison operations.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ref</em>&nbsp;</td><td>the reference </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>ContentObject at the referenced slot in the storage files </dd></dl>

</div>
</div><p>
<a class="anchor" name="4389adac31c1e202d4960e6f592c6f6d"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::diagnostic" ref="4389adac31c1e202d4960e6f592c6f6d" args="(String name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean org.ccnx.ccn.impl.repo.LogStructRepoStore.diagnostic           </td>
          <td>(</td>
          <td class="paramtype">String&nbsp;</td>
          <td class="paramname"> <em>name</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Dump all names of data stored in the repository into a special file within the repository on diagnostic request from higher level code. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>"nametree" or "nametreewide" to decide whether to limit the printout length of components </td></tr>
  </table>
</dl>

<p>Implements <a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store.html#dc9cd5f317985a00ecd12be44b10ebf8">org.ccnx.ccn.impl.repo.RepositoryStore</a>.</p>

</div>
</div><p>
<a class="anchor" name="849c732921fb6c2172aded62ffae3480"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::bulkImport" ref="849c732921fb6c2172aded62ffae3480" args="(String name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">synchronized boolean org.ccnx.ccn.impl.repo.LogStructRepoStore.bulkImport           </td>
          <td>(</td>
          <td class="paramtype">String&nbsp;</td>
          <td class="paramname"> <em>name</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>  throws <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_exception.html">RepositoryException</a> </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Bulk import of data from a file. 
<p>
Data must be in a format compatible with the repository store. This would normally mean wire format <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fileName</em>&nbsp;</td><td>the name of the file to import data from. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>false if reexpression for import in progress </dd></dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_exception.html" title="Exceptions specific to Repositories.">RepositoryException</a></em>&nbsp;</td><td></td></tr>
  </table>
</dl>

<p>Implements <a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store.html#9a36ed8305c0dd93e2a14cdf243dc9fc">org.ccnx.ccn.impl.repo.RepositoryStore</a>.</p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li>src/org/ccnx/ccn/impl/repo/LogStructRepoStore.java</ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed Sep 14 12:44:26 2011 for Content-Centric Networking in Java by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
