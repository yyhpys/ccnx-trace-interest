<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Content-Centric Networking in Java: org.ccnx.ccn.profiles.repo.RepositoryControl Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><b>org</b>.<b>ccnx</b>.<b>ccn</b>.<b>profiles</b>.<b>repo</b>.<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1repo_1_1_repository_control.html">RepositoryControl</a>
  </div>
</div>
<div class="contents">
<h1>org.ccnx.ccn.profiles.repo.RepositoryControl Class Reference</h1><!-- doxytag: class="org::ccnx::ccn::profiles::repo::RepositoryControl" -->Provides support for controlling repository functions beyond the basic operations for writing data from an application into a repository supported by classes in the org.ccnx.ccn.io package.  
<a href="#_details">More...</a>
<p>

<p>
<a href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1repo_1_1_repository_control-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static boolean&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1repo_1_1_repository_control.html#87337e6fbcdc8b577254017478d91a1f">localRepoSync</a> (<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1_c_c_n_handle.html">CCNHandle</a> handle, <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1io_1_1_c_c_n_abstract_input_stream.html">CCNAbstractInputStream</a> stream)  throws IOException </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Request that a local repository preserve a copy of the exact contents of a given stream opened for reading with a given handle, and all links that were dereferenced to read the stream.  <a href="#87337e6fbcdc8b577254017478d91a1f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static boolean&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1repo_1_1_repository_control.html#fd2a41d491664f71d2b0349a67735890">localRepoSync</a> (<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1_c_c_n_handle.html">CCNHandle</a> handle, CCNNetworkObject&lt;?&gt; obj)  throws IOException </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Method to do the same as above but using CCNNetworkObjects instead of streams.  <a href="#fd2a41d491664f71d2b0349a67735890"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="f336600ff12bcd6fa06384efe0a3700e"></a><!-- doxytag: member="org::ccnx::ccn::profiles::repo::RepositoryControl::doLocalCheckedWrite" ref="f336600ff12bcd6fa06384efe0a3700e" args="(ContentName baseName, Long startingSegmentNumber, byte[] firstDigest, CCNHandle handle)" -->
static <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_info.html">RepositoryInfo</a>&nbsp;</td><td class="memItemRight" valign="bottom"><b>doLocalCheckedWrite</b> (<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a> baseName, Long startingSegmentNumber, byte[] firstDigest, <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1_c_c_n_handle.html">CCNHandle</a> handle)  throws IOException, ContentDecodingException </td></tr>

<tr><td colspan="2"><br><h2>Static Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="832a52a1271db5da5dafbd850f6cda44"></a><!-- doxytag: member="org::ccnx::ccn::profiles::repo::RepositoryControl::syncedObjects" ref="832a52a1271db5da5dafbd850f6cda44" args="" -->
static Set&lt; <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1repo_1_1_repository_control.html#832a52a1271db5da5dafbd850f6cda44">syncedObjects</a> = Collections.synchronizedSet(new HashSet&lt;<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a>&gt;())</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Temporary cache of blocks we have synced, to avoid double-syncing blocks. <br></td></tr>
<tr><td colspan="2"><br><h2>Static Package Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="0251555f42415d14036068fbb38ad2f3"></a><!-- doxytag: member="org::ccnx::ccn::profiles::repo::RepositoryControl::internalRepoSync" ref="0251555f42415d14036068fbb38ad2f3" args="(CCNHandle handle, ContentName baseName, Long startingSegmentNumber, byte[] firstDigest, ContentName fullName)" -->
static boolean&nbsp;</td><td class="memItemRight" valign="bottom"><b>internalRepoSync</b> (<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1_c_c_n_handle.html">CCNHandle</a> handle, <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a> baseName, Long startingSegmentNumber, byte[] firstDigest, <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a> fullName)  throws IOException </td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Provides support for controlling repository functions beyond the basic operations for writing data from an application into a repository supported by classes in the org.ccnx.ccn.io package. 
<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>jthornto </dd></dl>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="87337e6fbcdc8b577254017478d91a1f"></a><!-- doxytag: member="org::ccnx::ccn::profiles::repo::RepositoryControl::localRepoSync" ref="87337e6fbcdc8b577254017478d91a1f" args="(CCNHandle handle, CCNAbstractInputStream stream)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static boolean org.ccnx.ccn.profiles.repo.RepositoryControl.localRepoSync           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1_c_c_n_handle.html">CCNHandle</a>&nbsp;</td>
          <td class="paramname"> <em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1io_1_1_c_c_n_abstract_input_stream.html">CCNAbstractInputStream</a>&nbsp;</td>
          <td class="paramname"> <em>stream</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td>  throws IOException <code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Request that a local repository preserve a copy of the exact contents of a given stream opened for reading with a given handle, and all links that were dereferenced to read the stream. 
<p>
A local repository is one connected directly to the same ccnd as the given handle; such a repository is likely to be special in the sense that it may be available to local applications even when there is no connectivity beyond the local machine. An application reading certain content that it did not originate may have reason to need that content to be available reliably as connectivity changes in the future. Since the application is not the source of the content, it need only ask the local repository to be interested in it rather than creating an output stream to write it. This method serves that purpose.<p>
This method is experimental and the way of addressing this problem is likely to change in the future.<p>
This method may fail (IOException) if the local repository is not already configured to support holding the data in question. For example, the repository policy might not admit the namespace in question and this method does not override such overall policy.<p>
There may be more than one local repository but this method does not presently distinguish one if that is the case. Any one local repository that is available may be used, and at most one should be expected to respond to the request. This method should verify that a confirmation is from an acceptable local repository.<p>
If the repository already holds the content it may confirm immediately, otherwise the repository will begin to retrieve and store the content but there is no guarantee that this is complete upon return from this method. The return value indicates whether data is already confirmed.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>handle</em>&nbsp;</td><td>the handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>stream</em>&nbsp;</td><td>The stream for which the content should be preserved </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>boolean true iff confirmation received from repository </dd></dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>IOException</em>&nbsp;</td><td>if no repository responds or another communication error occurs </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="fd2a41d491664f71d2b0349a67735890"></a><!-- doxytag: member="org::ccnx::ccn::profiles::repo::RepositoryControl::localRepoSync" ref="fd2a41d491664f71d2b0349a67735890" args="(CCNHandle handle, CCNNetworkObject&lt;?&gt; obj)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static boolean org.ccnx.ccn.profiles.repo.RepositoryControl.localRepoSync           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1_c_c_n_handle.html">CCNHandle</a>&nbsp;</td>
          <td class="paramname"> <em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CCNNetworkObject&lt;?&gt;&nbsp;</td>
          <td class="paramname"> <em>obj</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td>  throws IOException <code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Method to do the same as above but using CCNNetworkObjects instead of streams. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>handle</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>obj</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>syncSigner</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd></dd></dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>IOException</em>&nbsp;</td><td></td></tr>
  </table>
</dl>

</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li>src/org/ccnx/ccn/profiles/repo/RepositoryControl.java</ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed Sep 14 12:44:30 2011 for Content-Centric Networking in Java by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
